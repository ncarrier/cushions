make lzop and bzip2 rw
implement a popen handler
implement a socket handler
use dict for accepted modes
make returned FILE structures access thread safe